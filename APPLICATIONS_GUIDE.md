# Applications Setup Guide

Guide for setting up 1Password, Thunderbird with Proton Mail, and Discord with custom theming.

## üîê 1Password

### First-Time Setup

1. **Launch 1Password**:
   ```bash
   1password
   ```

2. **Sign In**:
   - If you have an existing account: Sign in with your account details
   - If new: Create an account at 1password.com first

3. **Enable Browser Integration** (optional):
   - Open 1Password settings
   - Enable browser integration for Firefox/Chromium
   - Install browser extension

### Using 1Password

- **Quick Access**: `Ctrl + \` (configurable)
- **SSH Agent**: 1Password can manage your SSH keys
- **CLI Tool**: Use `op` command for automation

### Configuration

1Password settings are managed by PolicyKit for secure integration with the system.

---

## üìß Thunderbird with Proton Mail

### Initial Setup

#### 1. Set Up Proton Mail Bridge

Proton Mail Bridge is required to use Proton Mail with Thunderbird:

```bash
# Launch Proton Mail Bridge
protonmail-bridge
```

**First-time setup**:
1. Log in with your Proton Mail credentials
2. Bridge will generate local IMAP/SMTP credentials
3. Keep Bridge running in the background

**Get Bridge Credentials**:
- Open Bridge ‚Üí Click on your account ‚Üí View credentials
- Note down:
  - IMAP/SMTP Server: `127.0.0.1`
  - IMAP Port: `1143`
  - SMTP Port: `1025`
  - Username: Your Proton email
  - Password: Generated by Bridge (not your Proton password!)

#### 2. Configure Thunderbird

1. **Launch Thunderbird**:
   ```bash
   thunderbird
   ```

2. **Add Proton Mail Account**:
   - Click "Email" under "Set up an account"
   - Enter your name and Proton email
   - Click "Continue"
   - Choose "Configure manually"

3. **Manual Configuration**:
   
   **Incoming (IMAP)**:
   - Server: `127.0.0.1`
   - Port: `1143`
   - Connection security: `STARTTLS`
   - Authentication: `Normal password`
   - Username: Your full Proton email
   
   **Outgoing (SMTP)**:
   - Server: `127.0.0.1`
   - Port: `1025`
   - Connection security: `STARTTLS`
   - Authentication: `Normal password`
   - Username: Your full Proton email

4. **Enter Bridge Password**:
   - Use the password generated by Proton Mail Bridge
   - NOT your Proton account password
   - Click "Done"

### Thunderbird Tips

- **Calendar**: Use Gnome Calendar or integrate CalDAV
- **Multiple Accounts**: Repeat setup for additional email accounts
- **Auto-start Bridge**: Bridge will start automatically on login

### Troubleshooting

**Can't connect to Proton Mail**:
- Ensure Proton Mail Bridge is running
- Check credentials from Bridge settings
- Verify ports 1143 and 1025 are not blocked

**Bridge not starting**:
```bash
# Check if Bridge is running
pgrep protonmail-bridge

# Restart Bridge
killall protonmail-bridge
protonmail-bridge &
```

---

## üí¨ Discord with Stylix Theming

### Features

Your Discord installation includes:
- **Vencord**: Advanced customization and plugins
- **OpenASAR**: Performance improvements
- **Stylix Integration**: Automatic theming based on your wallpaper
- **Modern UI**: Rounded corners, smooth animations

### Discord Setup

1. **Launch Discord**:
   ```bash
   discord
   ```

2. **First Launch**:
   - Log in with your Discord account
   - Discord will automatically apply your custom theme
   - Vencord settings are pre-configured

### Customization

#### Theme Updates

The theme automatically syncs with your Stylix colors. When you change your wallpaper:

1. Rebuild your system:
   ```bash
   sudo nixos-rebuild switch --flake .#$(hostname)
   ```

2. Restart Discord to apply new colors

#### Vencord Plugins

Your configuration includes many useful plugins:

**Enabled by default**:
- **BetterFolders**: Improved server folder UI
- **ImageZoom**: Click images to zoom
- **PinDMs**: Pin DMs to top
- **QuickReply**: Reply quickly with right-click
- **ShowHiddenChannels**: View hidden channels
- **SpotifyControls**: Control Spotify from Discord
- **Translate**: Translate messages inline
- **VolumeBooster**: Boost audio above 100%

**To configure plugins**:
1. Open Discord Settings
2. Scroll to "Vencord" section
3. Click "Plugins"
4. Enable/disable as needed

#### Custom CSS

Edit the custom CSS for additional tweaks:

```bash
nano ~/.config/Vencord/settings/quickCss.css
```

The CSS file automatically uses your Stylix colors via variables like:
- `config.lib.stylix.colors.base00` (background)
- `config.lib.stylix.colors.base0D` (accent/links)
- `config.lib.stylix.colors.base08` (danger/errors)

### Discord Tips

- **Screen Share**: Works natively on Wayland with Hyprland
- **Voice Quality**: Enabled krisp noise suppression in settings
- **Rich Presence**: Gaming status automatically shows

### Troubleshooting

**Theme not applying**:
1. Check Vencord is enabled in Discord settings
2. Ensure `useQuickCss` is enabled in Vencord settings
3. Restart Discord

**Vencord not loading**:
```bash
# Reinstall Discord
sudo nixos-rebuild switch --flake .#$(hostname)
```

**Custom colors not working**:
- Make sure you've built the system at least once with Stylix enabled
- Colors are generated from your wallpaper in `modules/stylix.nix`

---

## üé® AMD GPU Configuration (iron-tower)

Your iron-tower desktop is configured for AMD Radeon RX 7800 XT with:

### Features Enabled

- **AMDGPU Driver**: Open-source AMD driver
- **Vulkan Support**: AMD Vulkan (AMDVLK)
- **ROCm**: For compute workloads
- **Hardware Acceleration**: Video encoding/decoding
- **CoreCtrl**: GPU overclocking and fan control

### Monitoring GPU

```bash
# AMD-specific GPU monitor
radeontop

# General GPU info
glxinfo | grep "OpenGL renderer"
vulkaninfo | grep "deviceName"

# Check driver
lspci -k | grep -EA3 'VGA|3D'
```

### CoreCtrl (GPU Control)

```bash
# Launch CoreCtrl for overclocking/fan control
corectrl
```

**Features**:
- GPU frequency control
- Fan curve customization
- Power limit adjustment
- Real-time monitoring

**Note**: CoreCtrl has superuser permissions for GPU control.

### Gaming Performance

For best gaming performance:

1. **Enable GameMode**:
   ```bash
   gamemoderun <game>
   ```

2. **Check GPU usage**:
   ```bash
   watch -n 1 radeontop
   ```

3. **Vulkan**: Most games should use Vulkan for best AMD performance

### Troubleshooting GPU

**Check if driver loaded**:
```bash
lsmod | grep amdgpu
```

**GPU not detected**:
```bash
# Check hardware
lspci | grep VGA

# Check kernel messages
dmesg | grep amdgpu
```

**Performance issues**:
- Check CoreCtrl for power settings
- Ensure GameMode is enabled
- Verify Vulkan is working: `vulkaninfo`

---

## üöÄ Quick Commands

```bash
# Launch applications
1password              # Password manager
thunderbird            # Email client
discord                # Chat (with custom theme)
protonmail-bridge      # Proton Mail (run in background)

# Monitoring
radeontop              # GPU usage (AMD)
corectrl               # GPU control
htop                   # System monitor

# Rebuild system (apply changes)
sudo nixos-rebuild switch --flake .#$(hostname)
```

---

## üìù Configuration Files

- **1Password**: Managed by system PolicyKit
- **Thunderbird**: `~/.thunderbird/`
- **Proton Bridge**: `~/.config/protonmail/bridge/`
- **Discord**: `~/.config/discord/`
- **Vencord**: `~/.config/Vencord/`
- **Discord Theme**: `~/.config/Vencord/settings/quickCss.css`
- **AMD GPU**: `hosts/iron-tower/configuration.nix`

---

## üîÑ Updates

### Updating Applications

All applications update automatically when you rebuild:

```bash
# Update flake inputs
nix flake update

# Rebuild system
sudo nixos-rebuild switch --flake .#$(hostname)
```

### Updating Discord Theme

Theme updates automatically when you:
1. Change your wallpaper (Stylix)
2. Rebuild the system
3. Restart Discord

---

## üí° Tips

### 1Password
- Use SSH agent feature for development
- Enable Touch ID/fingerprint if supported
- Set up 2FA for important accounts

### Thunderbird
- Keep Proton Bridge running at all times
- Add calendar for Proton Calendar integration
- Use search filters for better email management

### Discord
- Customize Vencord plugins in settings
- Use `Ctrl+K` for quick switcher
- Enable hardware acceleration in settings

### AMD GPU
- Use CoreCtrl profiles for different scenarios
- Monitor temperatures during gaming
- Keep drivers updated via system updates
